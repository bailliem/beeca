% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/augment.R
\name{augment.beeca}
\alias{augment.beeca}
\title{Augment method for beeca objects}
\usage{
\method{augment}{beeca}(
  x,
  data = NULL,
  newdata = NULL,
  type.predict = "response",
  type.residuals = "deviance",
  ...
)
}
\arguments{
\item{x}{a beeca object (glm object modified by \link[beeca]{get_marginal_effect})}

\item{data}{optional dataset to augment. If NULL (default), uses the data
from the original model fit.}

\item{newdata}{deprecated. Use \code{data} instead.}

\item{type.predict}{type of prediction to include as \code{.fitted}. Options are
"response" (default, predicted probabilities) or "link" (linear predictor scale).}

\item{type.residuals}{type of residuals to include. Options are "deviance" (default),
"pearson", "response", or "working". Set to NULL to exclude residuals.}

\item{...}{additional arguments (not currently used)}
}
\value{
a tibble containing the original data augmented with:
\tabular{ll}{
.rownames \tab Row names from the original data (if present) \cr
.fitted   \tab Fitted values from the working model \cr
.resid    \tab Residuals (if type.residuals is not NULL) \cr
.counterfactual_[level] \tab Predicted outcome if assigned to each treatment level \cr
}
}
\description{
Augments the original dataset with predictions and counterfactual outcomes
from a beeca analysis. This function provides a broom-compatible interface
for accessing individual-level predictions and potential outcomes under
different treatment assignments.
}
\details{
The \code{augment.beeca()} method returns the original dataset used in the
analysis, augmented with additional columns containing:
\itemize{
\item Fitted values from the working model (\code{.fitted})
\item Counterfactual predictions for each treatment level
\item Optionally, residuals and other diagnostic information
}

This is particularly useful for:
\itemize{
\item Examining individual predictions and potential outcomes
\item Creating plots of treatment effects across covariates
\item Conducting sensitivity analyses
\item Understanding how g-computation works at the individual level
}

Each counterfactual column represents the predicted outcome if that
subject were assigned to a specific treatment level, holding all other
covariates constant.
}
\examples{
trial01$trtp <- factor(trial01$trtp)
fit1 <- glm(aval ~ trtp + bl_cov, family = "binomial", data = trial01) |>
  get_marginal_effect(trt = "trtp", method = "Ye", contrast = "diff", reference = "0")

# Augment with counterfactual predictions
augmented <- augment(fit1)
head(augmented)

# Access counterfactual predictions for treatment level 1
augmented$.counterfactual_1

\dontrun{
# Examine predictions by baseline covariate
library(ggplot2)
ggplot(augmented, aes(x = bl_cov, y = .counterfactual_1 - .counterfactual_0)) +
  geom_point() +
  labs(y = "Individual Treatment Effect")
}

}
\seealso{
\code{\link[=get_marginal_effect]{get_marginal_effect()}} for the main analysis function

\code{\link[=tidy.beeca]{tidy.beeca()}} for tidied parameter estimates

\code{\link[=predict_counterfactuals]{predict_counterfactuals()}} for the underlying prediction method
}
