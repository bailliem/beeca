# Requirements Archive: v0.4.0 GEE Extension

**Archived:** 2026-02-08
**Status:** SHIPPED

This is the archived requirements specification for v0.4.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: beeca v0.4.0 GEE Extension

**Defined:** 2026-02-07
**Core Value:** GEE objects flow through beeca's g-computation pipeline with correct variance estimation

## v0.4.0 Requirements

### Input Validation

- [x] **VALID-01**: sanitize_model.glmgee() S3 method validates glmgee objects (binomial/logit, factor treatment, no interactions)
- [x] **VALID-02**: sanitize_model.geeglm() S3 method validates geeglm objects (binomial/logit, factor treatment, no interactions)
- [x] **VALID-03**: Informative error messages when GEE objects fail validation

### Variance Estimation

- [x] **VAR-01**: estimate_varcov routes GEE objects to GEE's own vcov instead of sandwich::vcovHC
- [x] **VAR-02**: Robust sandwich variance supported for both glmgee and geeglm
- [x] **VAR-03**: Bias-corrected (Mancl-DeRouen) variance supported for glmgee
- [x] **VAR-04**: DF-adjusted variance supported for glmgee
- [x] **VAR-05**: Informative error when Ye method requested for GEE objects

### Pipeline

- [x] **PIPE-01**: predict_counterfactuals works with GEE objects
- [x] **PIPE-02**: average_predictions works with GEE objects
- [x] **PIPE-03**: All five contrast types work with GEE objects (diff, or, rr, logor, logrr)
- [x] **PIPE-04**: get_marginal_effect works end-to-end with GEE objects

### Testing

- [x] **TEST-01**: GEE-specific test suite with cross-validation against manual computation
- [x] **TEST-02**: All 308 existing GLM tests continue to pass (no regressions)
- [x] **TEST-03**: R CMD check passes with no errors/warnings

### Documentation

- [x] **DOC-01**: New GEE vignette with end-to-end workflow example
- [x] **DOC-02**: Man pages document GEE support (sanitize_model, estimate_varcov)
- [x] **DOC-03**: NEWS.md updated for v0.4.0

## Future Requirements (v0.5.0 ARD)

- **ARD-01**: Test coverage for beeca_to_cards_ard()
- **ARD-02**: Confidence intervals in marginal_results ARD
- **ARD-03**: Metadata enrichment (beeca_metadata attributes)
- **ARD-04**: Converter infrastructure (beeca_to_ard dispatcher, CDISC ARS)

## Out of Scope

| Feature | Reason |
|---------|--------|
| Multi-timepoint longitudinal GEE | Requires companion package (beecal), not beeca's identity |
| Ye et al. method for GEE | Assumes independence, not valid for correlated data |
| gee package support | Older package, lower priority -- can add later if needed |
| CRAN submission | GitHub release only for v0.4.0 |
| ARD improvements | Deferred to v0.5.0 milestone |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| VALID-01 | Phase 5 | Complete |
| VALID-02 | Phase 5 | Complete |
| VALID-03 | Phase 5 | Complete |
| VAR-01 | Phase 5 | Complete |
| VAR-02 | Phase 5 | Complete |
| VAR-03 | Phase 5 | Complete |
| VAR-04 | Phase 5 | Complete |
| VAR-05 | Phase 5 | Complete |
| PIPE-01 | Phase 5 | Complete |
| PIPE-02 | Phase 5 | Complete |
| PIPE-03 | Phase 5 | Complete |
| PIPE-04 | Phase 5 | Complete |
| TEST-01 | Phase 6 | Complete |
| TEST-02 | Phase 6 | Complete |
| TEST-03 | Phase 6 | Complete |
| DOC-01 | Phase 7 | Complete |
| DOC-02 | Phase 7 | Complete |
| DOC-03 | Phase 7 | Complete |

---

## Milestone Summary

**Shipped:** 18 of 18 v0.4.0 requirements
**Adjusted:** None -- all requirements shipped as originally specified
**Dropped:** None

---
*Archived: 2026-02-08 as part of v0.4.0 milestone completion*
