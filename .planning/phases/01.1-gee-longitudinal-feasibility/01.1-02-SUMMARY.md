---
phase: 01.1-gee-longitudinal-feasibility
plan: 02
subsystem: documentation
tags: [gee, longitudinal, feasibility, glmtoolbox, geepack, mancl-derouен]

# Dependency graph
requires:
  - phase: 01.1-01
    provides: Empirical GEE feasibility test results with glmtoolbox and geepack
provides:
  - GEE extension feasibility report with CONDITIONAL GO recommendation
  - Scoped implementation plan for Option A (minimal - accept GEE for single-timepoint)
  - Risk assessment and dependency evaluation
  - Three implementation options analyzed (minimal, multi-timepoint, companion package)
affects: [01.1-03-implementation, future-gee-features]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Feasibility analysis pattern: empirical test → comprehensive report → go/no-go decision"
    - "Three-option scoping: minimal (in-package), moderate (feature expansion), full (companion package)"

key-files:
  created:
    - .planning/phases/01.1-gee-longitudinal-feasibility/01.1-FEASIBILITY-REPORT.md
  modified: []

key-decisions:
  - "CONDITIONAL GO - Proceed with Option A (minimal implementation)"
  - "Accept GEE objects for single-timepoint analysis only (not multi-timepoint)"
  - "Add sanitize_model.glmgee() and sanitize_model.geeglm() S3 methods"
  - "Route Ge variance to vcov(gee_object) instead of sandwich::vcovHC()"
  - "Disable Ye method for GEE objects (not extensible to clustered data)"
  - "Defer multi-timepoint support until user need confirmed"
  - "Recommend glmtoolbox over geepack (Mancl-DeRouen support, better maintenance)"

patterns-established:
  - "Research spike pattern: quick empirical test (Plan 01) followed by comprehensive analysis (Plan 02)"
  - "Feasibility report structure: Executive Summary, Test Results, Architecture Assessment, Methodology, Scope Options, Recommendation, Risks, Next Steps"
  - "Option analysis framework: minimal (safe), moderate (scope creep risk), full (separate package)"

# Metrics
duration: 63min
completed: 2026-02-03
---

# Phase 01.1 Plan 02: GEE Feasibility Report Summary

**CONDITIONAL GO recommendation for GEE extension - minimal implementation (Option A) adds S3 methods for glmgee/geeglm objects with Mancl-DeRouen variance, defers multi-timepoint to companion package**

## Performance

- **Duration:** 63 min
- **Started:** 2026-02-03T20:44:43Z
- **Completed:** 2026-02-03T20:47:29Z (checkpoint approved)
- **Tasks:** 2 (1 auto task, 1 checkpoint)
- **Files modified:** 1

## Accomplishments
- Comprehensive feasibility report produced with empirical evidence from Plan 01
- CONDITIONAL GO recommendation delivered with clear rationale for Option A (minimal)
- Three implementation options analyzed (minimal: 3.5 days, moderate: 3 weeks, full: 6-7 weeks)
- Risk assessment completed for all options with dependency evaluation
- Scoped implementation plan with 4 phases (1.1.1 through 1.1.4)
- User approved recommendation after checkpoint review

## Task Commits

Each task was committed atomically:

1. **Task 1: Write the feasibility report** - `8b8eb40` (docs)
   - Comprehensive 690-line feasibility analysis
   - Empirical test results from Plan 01 integrated
   - Architecture assessment with file-by-file change analysis
   - Methodology validation (Ge delta method extension to GEE)
   - Three scope options evaluated (minimal, moderate, full companion package)
   - Risk assessment and dependency analysis
   - Implementation roadmap for Option A (4 phases, 3.5 days total)

2. **Task 2: User checkpoint - review and approve** - (checkpoint approved)
   - User reviewed feasibility report
   - User approved CONDITIONAL GO with Option A

**Plan metadata:** (pending - this commit)

## Files Created/Modified
- `.planning/phases/01.1-gee-longitudinal-feasibility/01.1-FEASIBILITY-REPORT.md` - 690-line comprehensive feasibility analysis with go/no-go recommendation

## Decisions Made

All key decisions documented in frontmatter. Primary decision flow:

1. **Recommendation:** CONDITIONAL GO - Proceed with Option A (minimal implementation)
2. **Scope boundary:** Accept GEE objects for single-timepoint analysis only
3. **Implementation approach:**
   - Add sanitize_model.glmgee() and sanitize_model.geeglm() S3 methods (~80 lines)
   - Route Ge variance to vcov(gee_object, type=...) instead of sandwich::vcovHC() (~50 lines)
   - Disable Ye method for GEE with informative error (~10 lines)
4. **Deferred:** Multi-timepoint support pending user confirmation of need
5. **Package choice:** Recommend glmtoolbox (primary) over geepack (secondary) due to Mancl-DeRouen support

**Rationale for Option A:**
- Empirical evidence confirms core requirements work (predict, vcov)
- Changes are surgical and low-risk (~150 lines new code, 2 files modified)
- Immediate value for clustered data use cases
- Mancl-DeRouen correction comes free via glmtoolbox
- Preserves beeca's identity as focused, GxP-compliant package
- Minimal maintenance and testing burden

**Why not Option B (multi-timepoint in beeca):**
- Scope creep (5+ files, 400+ lines, 3 weeks)
- Package identity dilution (beeca is "Binary Endpoint Estimation" - singular)
- High testing complexity (unbalanced visits, dropout, time-varying covariates)
- User need unclear (g-computation vs. direct GEE estimation)

**Why not Option C (companion package) now:**
- 6-7 weeks effort requires confirmed demand
- Should wait for user feedback on Option A
- Evaluate RobinCar longitudinal features as alternative first

## Deviations from Plan

None - plan executed exactly as written. Plan specified:
1. Write feasibility report based on Plan 01 results ✓
2. Present to user for approval (checkpoint) ✓

All phase success criteria satisfied:
1. ✓ Feasibility report produced
2. ✓ Tested with glmtoolbox and geepack (Plan 01)
3. ✓ Go/no-go recommendation with clear rationale (CONDITIONAL GO - Option A)
4. ✓ Scoped implementation plan provided (4 phases, 3.5 days)

## Issues Encountered

None. The feasibility report leveraged all findings from Plan 01's empirical tests:
- Confirmed predict(newdata) and vcov(type='robust') work
- Documented compatibility matrix (what works, what needs changes)
- Manual Ge delta method test validated approach
- Both glmgee and geeglm tested for comprehensive coverage

## Next Phase Readiness

**Phase 01.1 complete** - Feasibility analysis delivered CONDITIONAL GO recommendation.

**Implementation ready if approved:**
- Phase 1.1.1: Implement GEE S3 methods (1 day)
- Phase 1.1.2: Route Ge variance to GEE vcov (1 day)
- Phase 1.1.3: Disable Ye method for GEE (0.5 day)
- Phase 1.1.4: Testing and documentation (1 day)
- Total: 3.5 days

**Deliverables from Option A implementation:**
- GEE objects accepted for single-timepoint analysis
- Mancl-DeRouen correction available via type="bias-corrected"
- Clear error for Ye method with GEE
- Documentation with GEE examples
- Test coverage 95%+

**User decision point:**
- User approved Option A recommendation
- Next step: Execute implementation phases 1.1.1-1.1.4 OR
- Defer implementation pending resource allocation

**No blockers.** All technical feasibility confirmed. Implementation scoped and estimated.

---
*Phase: 01.1-gee-longitudinal-feasibility*
*Completed: 2026-02-03*
